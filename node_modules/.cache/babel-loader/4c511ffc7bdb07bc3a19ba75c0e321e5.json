{"ast":null,"code":"import _asyncToGenerator from\"/Users/ksur/my_projects/playo/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/ksur/my_projects/playo/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/ksur/my_projects/playo/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState}from'react';import Display from'../component/Display';import DatePicker from'react-datepicker';import'react-datepicker/dist/react-datepicker.css';import ClipLoader from\"react-spinners/ClipLoader\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Dashboard(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),result=_useState2[0],setResult=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selectedDate=_useState4[0],setSelectedDate=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],isLoading=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var formatDate=function formatDate(date){var d=new Date(date),month=''+(d.getMonth()+1),day=''+d.getDate(),year=d.getFullYear();if(month.length<2)month='0'+month;if(day.length<2)day='0'+day;return[year,month,day].join('-');};var revenue=function revenue(){var rev=0;if(result!==null){var totalSlotsBooked=0;result.data.courtList.forEach(function(val){val.slotInfo.forEach(function(element){if(element.status===0){totalSlotsBooked=totalSlotsBooked+1;}});});rev=totalSlotsBooked*200;}return rev;};var handleClick=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var inputDate,response,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log('Clicked Bookings');if(!(selectedDate===null)){_context.next=4;break;}alert('Please select a date');return _context.abrupt(\"return\");case 4:isLoading(true);console.log(selectedDate);inputDate=formatDate(selectedDate);console.log(inputDate);_context.next=10;return fetch(\"https://playo.club/book-api/v5/availability/e63abe94-2547-409a-9b30-82cbcec2c468/SP4/\".concat(inputDate,\"/?userId=7406560606&deviceType=99\"),{method:'GET',headers:{'Accept':'application/json','Authorization':'b4ee93df154de37b0e38aa6a5dfda071aa751bfa'}});case 10:response=_context.sent;console.log(response);if(!(response.status===200)){_context.next=20;break;}_context.next=15;return response.json();case 15:res=_context.sent;console.log(res);setResult(res);_context.next=21;break;case 20:setError('Ooops!! Something went wrong.. please try again');case 21:isLoading(false);case 22:case\"end\":return _context.stop();}}},_callee);}));return function handleClick(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"Main\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"Header\",children:\"Playo Dashboard\"}),/*#__PURE__*/_jsx(\"div\",{className:\"Datepicker-wrapper\",children:/*#__PURE__*/_jsx(DatePicker,{selected:selectedDate,onChange:function onChange(date){return setSelectedDate(date);},dateFormat:\"dd/MM/yyyy\",placeholderText:\"Please select a date\",className:\"Datepicker\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"Button\",onClick:handleClick,children:\"Check Bookings\"}),/*#__PURE__*/_jsx(ClipLoader,{loading:loading,size:150}),loading===false&&error===null&&/*#__PURE__*/_jsx(Display,{res:result}),error!==null&&/*#__PURE__*/_jsx(\"div\",{children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"Revenue\",children:[\"Revenue of the day: \",/*#__PURE__*/_jsxs(\"span\",{className:\"Revenue-amount\",children:[\"Rs. \",revenue()]})]})]});}export default Dashboard;","map":{"version":3,"sources":["/Users/ksur/my_projects/playo/src/container/Dashboard.jsx"],"names":["React","useState","Display","DatePicker","ClipLoader","Dashboard","result","setResult","selectedDate","setSelectedDate","loading","isLoading","error","setError","formatDate","date","d","Date","month","getMonth","day","getDate","year","getFullYear","length","join","revenue","rev","totalSlotsBooked","data","courtList","forEach","val","slotInfo","element","status","handleClick","console","log","alert","inputDate","fetch","method","headers","response","json","res"],"mappings":"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","sourcesContent":["import React, {useState} from 'react'\nimport Display from '../component/Display';\nimport DatePicker from 'react-datepicker';\nimport 'react-datepicker/dist/react-datepicker.css';\nimport ClipLoader from \"react-spinners/ClipLoader\";\n\nfunction Dashboard() {\n    const [result, setResult] = useState(null)\n    const [selectedDate, setSelectedDate] = useState(null)\n    const [loading, isLoading] = useState(false)\n    const [error, setError] = useState(null)\n\n    const formatDate = date =>  {\n        let d = new Date(date),\n            month = '' + (d.getMonth() + 1),\n            day = '' + d.getDate(),\n            year = d.getFullYear();\n    \n        if (month.length < 2) \n            month = '0' + month;\n        if (day.length < 2) \n            day = '0' + day;\n    \n        return [year, month, day].join('-');\n    }\n\n    const revenue = () => {\n        let rev = 0;\n        if(result !== null){\n            let totalSlotsBooked = 0;\n            result.data.courtList.forEach(val => {\n                val.slotInfo.forEach(element => {\n                    if(element.status === 0){\n                        totalSlotsBooked = totalSlotsBooked + 1;\n                    }\n                });    \n                \n            });\n            rev = totalSlotsBooked * 200;       \n        }\n        return rev;\n    }   \n\n    const handleClick = async () => {\n        console.log('Clicked Bookings');\n        if (selectedDate === null){\n            alert('Please select a date');\n            return;\n        }\n        isLoading(true);\n        console.log(selectedDate);\n        const inputDate = formatDate(selectedDate);\n        console.log(inputDate)\n        const response = await fetch(`https://playo.club/book-api/v5/availability/e63abe94-2547-409a-9b30-82cbcec2c468/SP4/${inputDate}/?userId=7406560606&deviceType=99`,\n            {\n                method: 'GET',\n                headers: {\n                    'Accept': 'application/json',\n                    'Authorization': 'b4ee93df154de37b0e38aa6a5dfda071aa751bfa'    \n                }\n            });\n        console.log(response);\n        if(response.status === 200){\n            const res = await response.json();\n            console.log(res);\n            setResult(res);\n        } else {\n            setError('Ooops!! Something went wrong.. please try again');\n        }\n        isLoading(false);\n    }\n\n  return (\n    <div className='Main'>\n        <div className='Header'>Playo Dashboard</div>\n        <div className='Datepicker-wrapper'>\n            <DatePicker\n                selected = {selectedDate}\n                onChange = {date => setSelectedDate(date)}\n                dateFormat = 'dd/MM/yyyy'\n                placeholderText=\"Please select a date\"\n                className='Datepicker'\n            />\n        </div>\n        <button className='Button' onClick={handleClick}>Check Bookings</button>\n        <ClipLoader loading={loading} size={150} />\n        { loading === false && error === null && <Display res={result}/>}\n        { error !== null && <div>{error}</div>}\n        <div className='Revenue'>Revenue of the day: <span className='Revenue-amount'>Rs. {revenue()}</span></div>\n    </div>\n  )\n}\n\nexport default Dashboard;"]},"metadata":{},"sourceType":"module"}